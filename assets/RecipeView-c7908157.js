import{d as V,c as m,a as t,t as d,F as L,r as A,o as p,_ as x,b as S,p as G,e as U,f as _e,g as R,u as Y,h as pe,i as fe,j as ge,k as me,l as he,m as we,n as ye,q as $,w as J,s as ne,v as ke,x as N,y as Ce,z as se,A as Se,B as ze,C as $e,D as P,E as W,G as Ie,H as be,I as Ve}from"./index-e2c548c4.js";const xe={class:"container"},Pe={class:"instructions"},Ee=V({__name:"CookingPhaseInstructions",props:{title:{},instructions:{}},setup(e){return(n,o)=>(p(),m("div",xe,[t("h3",null,d(n.title),1),t("div",Pe,[(p(!0),m(L,null,A(n.instructions,(s,r)=>(p(),m("span",{key:s},d(r+1)+". "+d(s),1))),128))])]))}});const B=x(Ee,[["__scopeId","data-v-2b6b6fec"]]),z=e=>(G("data-v-88f6c797"),e=e(),U(),e),Fe={class:"container"},Oe=z(()=>t("h2",null,"Wartości odżywcze",-1)),Le=z(()=>t("th",{class:"name"},"Wartość odżywcza",-1)),Ae={class:"servings"},Me=z(()=>t("th",{class:"hundred-g"},"w 100 g",-1)),Ne=z(()=>t("td",null,"Wartość energetyczna",-1)),We=z(()=>t("td",null,"Tłuszcz",-1)),Be=z(()=>t("td",null,"w tym kwasy tłuszczowe nasycone",-1)),De=z(()=>t("td",null,"Węglowodany",-1)),Re=z(()=>t("td",null,"w tym cukry",-1)),je=z(()=>t("td",null,"Białko",-1)),qe=z(()=>t("td",null,"Sól",-1)),Te=z(()=>t("td",null,"Cholesterol",-1)),I=2,He=V({__name:"NutritionValues",props:{ingredients:{}},setup(e){const n=e,o=S(()=>n.ingredients.reduce((l,i)=>l+i.quantity,0)),s=(l,i)=>l[i]??0,r=l=>(n.ingredients.reduce((_,w)=>_+w.quantity/100*s(w.nutritionalValue,l),0)/o.value*100).toFixed(1),a=(l,i)=>(n.ingredients.reduce((w,h)=>w+h.quantity/100*s(h.nutritionalValue,l),0)/i).toFixed(1);return(l,i)=>(p(),m("div",Fe,[Oe,t("table",null,[t("tr",null,[Le,t("th",Ae,"w porcji ("+d(o.value/2)+" g)",1),Me]),t("tr",null,[Ne,t("td",null,d(a("calories",I))+" kcal",1),t("td",null,d(r("calories"))+" kcal",1)]),t("tr",null,[We,t("td",null,d(a("totalFat",I))+" g",1),t("td",null,d(r("totalFat"))+" g",1)]),t("tr",null,[Be,t("td",null,d(a("saturatedFat",I))+" g",1),t("td",null,d(r("saturatedFat"))+" g",1)]),t("tr",null,[De,t("td",null,d(a("totalCarbohydrate",I))+" g",1),t("td",null,d(r("totalCarbohydrate"))+" g",1)]),t("tr",null,[Re,t("td",null,d(a("sugar",I))+" g",1),t("td",null,d(r("sugar"))+" g",1)]),t("tr",null,[je,t("td",null,d(a("protein",I))+" g",1),t("td",null,d(r("protein"))+" g",1)]),t("tr",null,[qe,t("td",null,d(a("sodium",I))+" g",1),t("td",null,d(r("sodium"))+" g",1)]),t("tr",null,[Te,t("td",null,d(a("cholesterol",I))+" g",1),t("td",null,d(r("cholesterol"))+" g",1)])])]))}});const Ge=x(He,[["__scopeId","data-v-88f6c797"]]),Ue=V({__name:"IngredientList",props:{ingredients:{}},emits:["ingredientRemoved"],setup(e,{emit:n}){const o=n,s=r=>{o("ingredientRemoved",r)};return(r,a)=>{const l=_e("font-awesome-icon");return p(),m("div",null,[(p(!0),m(L,null,A(r.ingredients,i=>(p(),m("div",{key:i.name,class:"ingredient"},[R(l,{icon:Y(pe),class:"remove-icon",onClick:_=>s(i)},null,8,["icon","onClick"]),fe(),t("span",null,d(i.quantityDescription),1)]))),128))])}}});const Ye=x(Ue,[["__scopeId","data-v-3d09afc0"]]);function ae(e){return ge()?(me(e),!0):!1}function F(e){return typeof e=="function"?e():Y(e)}const ue=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Je=Object.prototype.toString,Xe=e=>Je.call(e)==="[object Object]",O=()=>{},H=Ke();function Ke(){var e,n;return ue&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const oe={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Qe(...e){if(e.length!==1)return he(...e);const n=e[0];return typeof n=="function"?we(ye(()=>({get:n,set:O}))):$(n)}function E(e){var n;const o=F(e);return(n=o==null?void 0:o.$el)!=null?n:o}const re=ue?window:void 0;function j(...e){let n,o,s,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,s,r]=e,n=re):[n,o,s,r]=e,!n)return O;Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);const a=[],l=()=>{a.forEach(h=>h()),a.length=0},i=(h,y,u,c)=>(h.addEventListener(y,u,c),()=>h.removeEventListener(y,u,c)),_=J(()=>[E(n),F(r)],([h,y])=>{if(l(),!h)return;const u=Xe(y)?{...y}:y;a.push(...o.flatMap(c=>s.map(k=>i(h,c,k,u))))},{immediate:!0,flush:"post"}),w=()=>{_(),l()};return ae(w),w}let le=!1;function ie(e,n,o={}){const{window:s=re,ignore:r=[],capture:a=!0,detectIframe:l=!1}=o;if(!s)return O;H&&!le&&(le=!0,Array.from(s.document.body.children).forEach(u=>u.addEventListener("click",O)),s.document.documentElement.addEventListener("click",O));let i=!0;const _=u=>r.some(c=>{if(typeof c=="string")return Array.from(s.document.querySelectorAll(c)).some(k=>k===u.target||u.composedPath().includes(k));{const k=E(c);return k&&(u.target===k||u.composedPath().includes(k))}}),h=[j(s,"click",u=>{const c=E(e);if(!(!c||c===u.target||u.composedPath().includes(c))){if(u.detail===0&&(i=!_(u)),!i){i=!0;return}n(u)}},{passive:!0,capture:a}),j(s,"pointerdown",u=>{const c=E(e);i=!_(u)&&!!(c&&!u.composedPath().includes(c))},{passive:!0}),l&&j(s,"blur",u=>{setTimeout(()=>{var c;const k=E(e);((c=s.document.activeElement)==null?void 0:c.tagName)==="IFRAME"&&!(k!=null&&k.contains(s.document.activeElement))&&n(u)},0)})].filter(Boolean);return()=>h.forEach(u=>u())}const Ze={[oe.mounted](e,n){const o=!n.modifiers.bubble;if(typeof n.value=="function")e.__onClickOutside_stop=ie(e,n.value,{capture:o});else{const[s,r]=n.value;e.__onClickOutside_stop=ie(e,s,Object.assign({capture:o},r))}},[oe.unmounted](e){e.__onClickOutside_stop()}};function T(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function ce(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!o||o.tagName==="BODY"?!1:ce(o)}}function et(e){const n=e||window.event,o=n.target;return ce(o)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const D=new WeakMap;function tt(e,n=!1){const o=$(n);let s=null,r;J(Qe(e),i=>{const _=T(F(i));if(_){const w=_;D.get(w)||D.set(w,r),o.value&&(w.style.overflow="hidden")}},{immediate:!0});const a=()=>{const i=T(F(e));!i||o.value||(H&&(s=j(i,"touchmove",_=>{et(_)},{passive:!1})),i.style.overflow="hidden",o.value=!0)},l=()=>{var i;const _=T(F(e));!_||!o.value||(H&&(s==null||s()),_.style.overflow=(i=D.get(_))!=null?i:"",D.delete(_),o.value=!1)};return ae(l),S({get(){return o.value},set(i){i?a():l()}})}function nt(){let e=!1;const n=$(!1);return(o,s)=>{if(n.value=s.value,e)return;e=!0;const r=tt(o,s.value);J(n,a=>r.value=a)}}nt();const st={class:"search-container"},ot={class:"suggestions"},lt=["onClick"],it=V({__name:"SearchBar",props:ne({suggestions:{}},{modelValue:{default:""},modelModifiers:{}}),emits:ne(["search"],["update:modelValue"]),setup(e,{emit:n}){const o=e,s=ke(e,"modelValue"),r=n,a=S(()=>o.suggestions.filter(y=>y.label.toLowerCase().includes(s.value.toLowerCase())).sort().slice(0,5)),l=y=>{r("search",y),s.value="",i.value=!1},i=$(!1),_=S(()=>s.value.length>0||i.value),w=()=>{i.value=!0},h=()=>{i.value=!1};return(y,u)=>N((p(),m("div",st,[N(t("input",{type:"search",placeholder:"np. tofu",class:"search",name:"q",autocomplete:"off","onUpdate:modelValue":u[0]||(u[0]=c=>s.value=c),onFocus:w},null,544),[[Ce,s.value]]),N(t("div",ot,[(p(!0),m(L,null,A(a.value,c=>(p(),m("div",{key:c.label,class:"suggestion",onClick:k=>l(c)},d(c.label),9,lt))),128)),N(t("div",{class:"suggestion",onClick:u[1]||(u[1]=c=>s.value="")},"Nie znaleziono. ",512),[[se,a.value.length==0]])],512),[[se,_.value]])])),[[Y(Ze),h]])}});const at=x(it,[["__scopeId","data-v-9c08a17a"]]),ut=e=>(G("data-v-3123afac"),e=e(),U(),e),rt=ut(()=>t("g",null,[t("g",null,[t("path",{d:`M423.658,234.356c-12.438-0.003-24.01,3.457-33.869,9.468c-3.709,2.262-8.354,2.345-12.141,0.216
              s-6.121-6.137-6.121-10.482V155.4c0-12.027-10.109-21.7-22.139-21.7h-95.748c-4.252,0-8.188-2.248-10.349-5.909
              c-2.161-3.662-2.23-8.196-0.172-11.917c5.22-9.429,8.19-20.296,8.19-31.821c0-36.233-29.374-65.627-65.617-65.627
              c-36.232,0-65.601,29.404-65.601,65.638c0,11.523,2.97,22.385,8.187,31.811c2.061,3.723,1.999,8.258-0.163,11.923
              c-2.163,3.665-6.102,5.902-10.356,5.902H22.014c-12.032,0-22.013,9.673-22.013,21.7v76.237c0,4.231,2.226,8.15,5.859,10.318
              c3.633,2.168,8.143,2.27,11.864,0.257c9.267-5.012,19.876-7.858,31.151-7.855c36.239-0.005,65.612,29.377,65.612,65.612
              c0,36.238-29.373,65.616-65.612,65.606c-11.276,0-21.885-2.847-31.152-7.857c-3.725-2.014-8.234-1.92-11.871,0.25
              C2.216,360.139,0,364.061,0,368.294v80.76c0,12.033,9.98,21.784,22.013,21.784h327.375c12.027,0,22.139-9.751,22.139-21.784
              v-82.681c0-4.342,2.344-8.346,6.127-10.475c3.783-2.127,8.426-2.053,12.135,0.207c9.857,6.011,21.432,9.47,33.867,9.47
              c36.24,0.01,65.607-29.368,65.607-65.606C489.264,263.734,459.896,234.351,423.658,234.356z`})])],-1)),ct=[rt],dt={class:"text"},vt=V({__name:"PuzzleContainer",props:{text:{default:"Jigsaw"},isActive:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const o=n;return(s,r)=>(p(),m("div",{class:"jigsaw",onClick:r[0]||(r[0]=a=>o("click"))},[(p(),m("svg",{id:"Jigsaw",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"800px",height:"800px",viewBox:"0 0 489.264 489.264","xml:space":"preserve",class:Se(["background",{active:s.isActive}]),fill:"#FFFFFF"},ct,2)),t("span",dt,d(s.text),1)]))}});const _t=x(vt,[["__scopeId","data-v-3123afac"]]),q=e=>(G("data-v-b7c6da11"),e=e(),U(),e),pt={class:"container"},ft={key:0,class:"recipe"},gt={class:"header"},mt=["src","alt"],ht={class:"description"},wt={class:"tags"},yt=q(()=>t("h2",{class:"ingredients"},"Składniki",-1)),kt={class:"servings"},Ct=q(()=>t("h2",null,"Propozycje",-1)),St={class:"puzzles"},zt={class:"instructions-container"},$t=q(()=>t("h2",null,"Sposób przygotowania",-1)),It=q(()=>t("h3",null," Gotowe! Smaczenego! ",-1)),bt={key:1},Vt=V({__name:"RecipeView",setup(e){const{t:n}=ze(),o=Ie(),s=be(),r=o.params.slug,a=$(),l=$(),i=$(2),{toast:_}=Ve();$e(r).then(g=>{var v;if(g.status==404){s.replace({name:"NotFound"});return}a.value=g.data,l.value=(v=g.data)==null?void 0:v.puzzles[0]});const w=S(()=>{var v,f;if(!a.value)return[];if(!l.value)return[];const g=(v=l.value)==null?void 0:v.ingredients;return(f=a.value)==null?void 0:f.ingredients.filter(C=>g.includes(C.name)).flatMap(C=>C.instructions)}),h=S(()=>{var g;return((g=a.value)==null?void 0:g.ingredients.filter(v=>{var f;return(f=l.value)==null?void 0:f.ingredients.includes(v.name)}))??[]}),y=g=>{var v;l.value&&(l.value={...l.value},l.value.ingredients=(v=l.value)==null?void 0:v.ingredients.filter(f=>f!=g.name),_("Usunięto skadnik"))},u=g=>{const v=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return w.value.filter(f=>f.cookingPhase.startsWith(g)).sort((f,C)=>v.compare(f.cookingPhase,C.cookingPhase)).map(f=>f.details)},c=$(""),k=S(()=>{var g;return((g=a.value)==null?void 0:g.ingredients.filter(v=>{var f;return!((f=l.value)!=null&&f.ingredients.includes(v.name))}).map(v=>({label:n(`ingredients.${v.name}`),value:v.name})))??[]}),de=g=>{var f,C;const v=(f=a.value)==null?void 0:f.ingredients.find(M=>M.name==g.value);v&&(l.value={...l.value},(C=l.value)==null||C.ingredients.push(v.name),_("Dodano składnik"))},X=S(()=>u("Preparation")),K=S(()=>u("Frying")),Q=S(()=>u("Sauce")),Z=S(()=>u("Mixing")),ee=$(0),ve=g=>{var v;if(ee.value=g,l.value=(v=a.value)==null?void 0:v.puzzles[g],!l.value)throw Error("Puzzle not found");s.push({name:"recipes",params:{slug:l.value.slug}})};return(g,v)=>{var f,C,M;return p(),m("div",pt,[a.value?(p(),m("div",ft,[t("div",gt,[t("img",{src:a.value.imageUrl,alt:(f=l.value)==null?void 0:f.name,class:"image"},null,8,mt),t("div",ht,[t("h1",null,d((C=l.value)==null?void 0:C.name),1),t("span",null,d((M=l.value)==null?void 0:M.shortDescription),1),t("div",wt,[(p(!0),m(L,null,A(a.value.tags,b=>(p(),m("div",{key:b,class:"tag"},d(b),1))),128))]),yt,t("div",kt,[t("span",null,"liczba porcji: "+d(i.value),1)]),R(Ye,{ingredients:h.value,onIngredientRemoved:y},null,8,["ingredients"]),R(at,{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=b=>c.value=b),suggestions:k.value,class:"search",onSearch:de},null,8,["modelValue","suggestions"])])]),Ct,t("div",St,[(p(!0),m(L,null,A(a.value.puzzles,(b,te)=>(p(),P(_t,{text:b.name,key:b.slug,"is-active":ee.value==te,onClick:xt=>ve(te)},null,8,["text","is-active","onClick"]))),128))]),t("div",zt,[$t,X.value.length>0?(p(),P(B,{key:0,title:"Przygotowanie",instructions:X.value},null,8,["instructions"])):W("",!0),K.value.length>0?(p(),P(B,{key:1,title:"Smażenie",instructions:K.value},null,8,["instructions"])):W("",!0),Q.value.length>0?(p(),P(B,{key:2,title:"Sos",instructions:Q.value},null,8,["instructions"])):W("",!0),Z.value.length>0?(p(),P(B,{key:3,title:"Mieszanie",instructions:Z.value},null,8,["instructions"])):W("",!0),It]),R(Ge,{ingredients:h.value},null,8,["ingredients"])])):(p(),m("div",bt," Ładowanie... "))])}}});const Et=x(Vt,[["__scopeId","data-v-b7c6da11"]]);export{Et as default};
