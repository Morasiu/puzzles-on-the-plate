import{d as P,c as h,a as t,t as d,F as A,r as M,o as g,_ as V,b as C,p as H,e as G,f as _e,g as D,u as U,h as ge,i as pe,j as fe,k as he,l as me,m as we,n as ye,q as $,w as Y,s as ne,v as ke,x as N,y as Ce,z as se,A as ze,B as Se,C as $e,D as I,E,G as be,H as Ie,I as Pe}from"./index-db1dcd87.js";const Ve={class:"container"},Ee={class:"instructions"},Fe=P({__name:"CookingPhaseInstructions",props:{title:{},instructions:{}},setup(e){return(n,l)=>(g(),h("div",Ve,[t("h3",null,d(n.title),1),t("div",Ee,[(g(!0),h(A,null,M(n.instructions,(o,r)=>(g(),h("span",{key:o},d(r+1)+". "+d(o),1))),128))])]))}});const F=V(Fe,[["__scopeId","data-v-2b6b6fec"]]),S=e=>(H("data-v-8f9bddbf"),e=e(),G(),e),Oe={class:"container"},xe=S(()=>t("h2",null,"Wartości odżywcze",-1)),Le=S(()=>t("th",{class:"name"},"Wartość odżywcza",-1)),Ae={class:"servings"},Me=S(()=>t("th",{class:"hundred-g"},"w 100 g",-1)),Be=S(()=>t("td",null,"Wartość energetyczna",-1)),Ne=S(()=>t("td",null,"Tłuszcz",-1)),We=S(()=>t("td",null,"w tym kwasy tłuszczowe nasycone",-1)),De=S(()=>t("td",null,"Węglowodany",-1)),Re=S(()=>t("td",null,"w tym cukry",-1)),je=S(()=>t("td",null,"Białko",-1)),qe=S(()=>t("td",null,"Sól",-1)),Te=S(()=>t("td",null,"Cholesterol",-1)),He=P({__name:"NutritionValues",props:{ingredients:{},servings:{}},setup(e){const n=e,l=C(()=>n.ingredients.reduce((s,i)=>s+i.quantity,0)),o=(s,i)=>s[i]??0,r=s=>(n.ingredients.reduce((p,w)=>p+w.quantity/100*o(w.nutritionalValue,s),0)/l.value*100).toFixed(1),a=(s,i)=>(n.ingredients.reduce((w,m)=>w+m.quantity/100*o(m.nutritionalValue,s),0)/i).toFixed(1);return(s,i)=>(g(),h("div",Oe,[xe,t("table",null,[t("tr",null,[Le,t("th",Ae,"w porcji ("+d(Math.floor(l.value/s.servings))+" g)",1),Me]),t("tr",null,[Be,t("td",null,d(a("calories",s.servings))+" kcal",1),t("td",null,d(r("calories"))+" kcal",1)]),t("tr",null,[Ne,t("td",null,d(a("totalFat",s.servings))+" g",1),t("td",null,d(r("totalFat"))+" g",1)]),t("tr",null,[We,t("td",null,d(a("saturatedFat",s.servings))+" g",1),t("td",null,d(r("saturatedFat"))+" g",1)]),t("tr",null,[De,t("td",null,d(a("totalCarbohydrate",s.servings))+" g",1),t("td",null,d(r("totalCarbohydrate"))+" g",1)]),t("tr",null,[Re,t("td",null,d(a("sugar",s.servings))+" g",1),t("td",null,d(r("sugar"))+" g",1)]),t("tr",null,[je,t("td",null,d(a("protein",s.servings))+" g",1),t("td",null,d(r("protein"))+" g",1)]),t("tr",null,[qe,t("td",null,d(a("sodium",s.servings))+" g",1),t("td",null,d(r("sodium"))+" g",1)]),t("tr",null,[Te,t("td",null,d(a("cholesterol",s.servings))+" g",1),t("td",null,d(r("cholesterol"))+" g",1)])])]))}});const Ge=V(He,[["__scopeId","data-v-8f9bddbf"]]),Ue=P({__name:"IngredientList",props:{ingredients:{}},emits:["ingredientRemoved"],setup(e,{emit:n}){const l=n,o=r=>{l("ingredientRemoved",r)};return(r,a)=>{const s=_e("font-awesome-icon");return g(),h("div",null,[(g(!0),h(A,null,M(r.ingredients,i=>(g(),h("div",{key:i.name,class:"ingredient"},[D(s,{icon:U(ge),class:"remove-icon",onClick:p=>o(i)},null,8,["icon","onClick"]),pe(),t("span",null,d(i.quantityDescription),1)]))),128))])}}});const Ye=V(Ue,[["__scopeId","data-v-3d09afc0"]]);function ae(e){return fe()?(he(e),!0):!1}function x(e){return typeof e=="function"?e():U(e)}const ue=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Je=Object.prototype.toString,Xe=e=>Je.call(e)==="[object Object]",L=()=>{},T=Ke();function Ke(){var e,n;return ue&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const oe={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function Qe(...e){if(e.length!==1)return me(...e);const n=e[0];return typeof n=="function"?we(ye(()=>({get:n,set:L}))):$(n)}function O(e){var n;const l=x(e);return(n=l==null?void 0:l.$el)!=null?n:l}const re=ue?window:void 0;function R(...e){let n,l,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([l,o,r]=e,n=re):[n,l,o,r]=e,!n)return L;Array.isArray(l)||(l=[l]),Array.isArray(o)||(o=[o]);const a=[],s=()=>{a.forEach(m=>m()),a.length=0},i=(m,y,u,c)=>(m.addEventListener(y,u,c),()=>m.removeEventListener(y,u,c)),p=Y(()=>[O(n),x(r)],([m,y])=>{if(s(),!m)return;const u=Xe(y)?{...y}:y;a.push(...l.flatMap(c=>o.map(k=>i(m,c,k,u))))},{immediate:!0,flush:"post"}),w=()=>{p(),s()};return ae(w),w}let le=!1;function ie(e,n,l={}){const{window:o=re,ignore:r=[],capture:a=!0,detectIframe:s=!1}=l;if(!o)return L;T&&!le&&(le=!0,Array.from(o.document.body.children).forEach(u=>u.addEventListener("click",L)),o.document.documentElement.addEventListener("click",L));let i=!0;const p=u=>r.some(c=>{if(typeof c=="string")return Array.from(o.document.querySelectorAll(c)).some(k=>k===u.target||u.composedPath().includes(k));{const k=O(c);return k&&(u.target===k||u.composedPath().includes(k))}}),m=[R(o,"click",u=>{const c=O(e);if(!(!c||c===u.target||u.composedPath().includes(c))){if(u.detail===0&&(i=!p(u)),!i){i=!0;return}n(u)}},{passive:!0,capture:a}),R(o,"pointerdown",u=>{const c=O(e);i=!p(u)&&!!(c&&!u.composedPath().includes(c))},{passive:!0}),s&&R(o,"blur",u=>{setTimeout(()=>{var c;const k=O(e);((c=o.document.activeElement)==null?void 0:c.tagName)==="IFRAME"&&!(k!=null&&k.contains(o.document.activeElement))&&n(u)},0)})].filter(Boolean);return()=>m.forEach(u=>u())}const Ze={[oe.mounted](e,n){const l=!n.modifiers.bubble;if(typeof n.value=="function")e.__onClickOutside_stop=ie(e,n.value,{capture:l});else{const[o,r]=n.value;e.__onClickOutside_stop=ie(e,o,Object.assign({capture:l},r))}},[oe.unmounted](e){e.__onClickOutside_stop()}};function q(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}function ce(e){const n=window.getComputedStyle(e);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&e.clientWidth<e.scrollWidth||n.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const l=e.parentNode;return!l||l.tagName==="BODY"?!1:ce(l)}}function et(e){const n=e||window.event,l=n.target;return ce(l)?!1:n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)}const W=new WeakMap;function tt(e,n=!1){const l=$(n);let o=null,r;Y(Qe(e),i=>{const p=q(x(i));if(p){const w=p;W.get(w)||W.set(w,r),l.value&&(w.style.overflow="hidden")}},{immediate:!0});const a=()=>{const i=q(x(e));!i||l.value||(T&&(o=R(i,"touchmove",p=>{et(p)},{passive:!1})),i.style.overflow="hidden",l.value=!0)},s=()=>{var i;const p=q(x(e));!p||!l.value||(T&&(o==null||o()),p.style.overflow=(i=W.get(p))!=null?i:"",W.delete(p),l.value=!1)};return ae(s),C({get(){return l.value},set(i){i?a():s()}})}function nt(){let e=!1;const n=$(!1);return(l,o)=>{if(n.value=o.value,e)return;e=!0;const r=tt(l,o.value);Y(n,a=>r.value=a)}}nt();const st={class:"search-container"},ot={class:"suggestions"},lt=["onClick"],it=P({__name:"SearchBar",props:ne({suggestions:{}},{modelValue:{default:""},modelModifiers:{}}),emits:ne(["search"],["update:modelValue"]),setup(e,{emit:n}){const l=e,o=ke(e,"modelValue"),r=n,a=C(()=>l.suggestions.filter(y=>y.label.toLowerCase().includes(o.value.toLowerCase())).sort().slice(0,5)),s=y=>{r("search",y),o.value="",i.value=!1},i=$(!1),p=C(()=>o.value.length>0||i.value),w=()=>{i.value=!0},m=()=>{i.value=!1};return(y,u)=>N((g(),h("div",st,[N(t("input",{type:"search",placeholder:"np. tofu",class:"search",name:"q",autocomplete:"off","onUpdate:modelValue":u[0]||(u[0]=c=>o.value=c),onFocus:w},null,544),[[Ce,o.value]]),N(t("div",ot,[(g(!0),h(A,null,M(a.value,c=>(g(),h("div",{key:c.label,class:"suggestion",onClick:k=>s(c)},d(c.label),9,lt))),128)),N(t("div",{class:"suggestion",onClick:u[1]||(u[1]=c=>o.value="")},"Nie znaleziono. ",512),[[se,a.value.length==0]])],512),[[se,p.value]])])),[[U(Ze),m]])}});const at=V(it,[["__scopeId","data-v-9c08a17a"]]),ut=e=>(H("data-v-3123afac"),e=e(),G(),e),rt=ut(()=>t("g",null,[t("g",null,[t("path",{d:`M423.658,234.356c-12.438-0.003-24.01,3.457-33.869,9.468c-3.709,2.262-8.354,2.345-12.141,0.216
              s-6.121-6.137-6.121-10.482V155.4c0-12.027-10.109-21.7-22.139-21.7h-95.748c-4.252,0-8.188-2.248-10.349-5.909
              c-2.161-3.662-2.23-8.196-0.172-11.917c5.22-9.429,8.19-20.296,8.19-31.821c0-36.233-29.374-65.627-65.617-65.627
              c-36.232,0-65.601,29.404-65.601,65.638c0,11.523,2.97,22.385,8.187,31.811c2.061,3.723,1.999,8.258-0.163,11.923
              c-2.163,3.665-6.102,5.902-10.356,5.902H22.014c-12.032,0-22.013,9.673-22.013,21.7v76.237c0,4.231,2.226,8.15,5.859,10.318
              c3.633,2.168,8.143,2.27,11.864,0.257c9.267-5.012,19.876-7.858,31.151-7.855c36.239-0.005,65.612,29.377,65.612,65.612
              c0,36.238-29.373,65.616-65.612,65.606c-11.276,0-21.885-2.847-31.152-7.857c-3.725-2.014-8.234-1.92-11.871,0.25
              C2.216,360.139,0,364.061,0,368.294v80.76c0,12.033,9.98,21.784,22.013,21.784h327.375c12.027,0,22.139-9.751,22.139-21.784
              v-82.681c0-4.342,2.344-8.346,6.127-10.475c3.783-2.127,8.426-2.053,12.135,0.207c9.857,6.011,21.432,9.47,33.867,9.47
              c36.24,0.01,65.607-29.368,65.607-65.606C489.264,263.734,459.896,234.351,423.658,234.356z`})])],-1)),ct=[rt],dt={class:"text"},vt=P({__name:"PuzzleContainer",props:{text:{default:"Jigsaw"},isActive:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const l=n;return(o,r)=>(g(),h("div",{class:"jigsaw",onClick:r[0]||(r[0]=a=>l("click"))},[(g(),h("svg",{id:"Jigsaw",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"800px",height:"800px",viewBox:"0 0 489.264 489.264","xml:space":"preserve",class:ze(["background",{active:o.isActive}]),fill:"#FFFFFF"},ct,2)),t("span",dt,d(o.text),1)]))}});const _t=V(vt,[["__scopeId","data-v-3123afac"]]),j=e=>(H("data-v-b09e5549"),e=e(),G(),e),gt={class:"container"},pt={key:0,class:"recipe"},ft={class:"header"},ht=["src","alt"],mt={class:"description"},wt={class:"title"},yt={class:"tags"},kt=j(()=>t("h2",{class:"ingredients"},"Składniki",-1)),Ct={class:"servings"},zt=j(()=>t("h2",null,"Propozycje",-1)),St={class:"puzzles"},$t={class:"instructions-container"},bt=j(()=>t("h2",null,"Sposób przygotowania",-1)),It=j(()=>t("h3",null," Gotowe! Smaczenego! ",-1)),Pt={key:1},Vt=P({__name:"RecipeView",setup(e){const{t:n}=Se(),l=be(),o=Ie(),r=l.params.slug,a=$(),s=$(),{toast:i}=Pe();$e(r).then(_=>{var v;if(_.status==404){o.replace({name:"NotFound"});return}a.value=_.data,s.value=(v=_.data)==null?void 0:v.puzzles[0]});const p=C(()=>{var _;return((_=a.value)==null?void 0:_.servings)??1}),w=C(()=>{var v,f;if(!a.value)return[];if(!s.value)return[];const _=(v=s.value)==null?void 0:v.ingredients;return(f=a.value)==null?void 0:f.ingredients.filter(z=>_.includes(z.name)).flatMap(z=>z.instructions)}),m=C(()=>{var _;return((_=a.value)==null?void 0:_.ingredients.filter(v=>{var f;return(f=s.value)==null?void 0:f.ingredients.includes(v.name)}))??[]}),y=_=>{var v;s.value&&(s.value={...s.value},s.value.ingredients=(v=s.value)==null?void 0:v.ingredients.filter(f=>f!=_.name),i("Usunięto skadnik"))},u=_=>{const v=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return w.value.filter(f=>f.cookingPhase.startsWith(_)).sort((f,z)=>v.compare(f.cookingPhase,z.cookingPhase)).map(f=>f.details)},c=$(""),k=C(()=>{var _;return((_=a.value)==null?void 0:_.ingredients.filter(v=>{var f;return!((f=s.value)!=null&&f.ingredients.includes(v.name))}).map(v=>({label:n(`ingredients.${v.name}`),value:v.name})))??[]}),de=_=>{var f,z;const v=(f=a.value)==null?void 0:f.ingredients.find(B=>B.name==_.value);v&&(s.value={...s.value},(z=s.value)==null||z.ingredients.push(v.name),i("Dodano składnik"))},J=C(()=>u("Preparation")),X=C(()=>u("Frying")),K=C(()=>u("Baking")),Q=C(()=>u("Sauce")),Z=C(()=>u("Mixing")),ee=$(0),ve=_=>{var v;if(ee.value=_,s.value=(v=a.value)==null?void 0:v.puzzles[_],!s.value)throw Error("Puzzle not found");o.push({name:"recipes",params:{slug:s.value.slug}})};return(_,v)=>{var f,z,B;return g(),h("div",gt,[a.value?(g(),h("div",pt,[t("div",ft,[t("img",{src:a.value.imageUrl,alt:(f=s.value)==null?void 0:f.name,class:"image"},null,8,ht),t("div",mt,[t("h1",wt,d((z=s.value)==null?void 0:z.name),1),t("span",null,d((B=s.value)==null?void 0:B.shortDescription),1),t("div",yt,[(g(!0),h(A,null,M(a.value.tags,b=>(g(),h("div",{key:b,class:"tag"},d(b),1))),128))]),kt,t("div",Ct,[t("span",null,"liczba porcji: "+d(p.value),1)]),D(Ye,{ingredients:m.value,onIngredientRemoved:y},null,8,["ingredients"]),D(at,{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=b=>c.value=b),suggestions:k.value,class:"search",onSearch:de},null,8,["modelValue","suggestions"])])]),zt,t("div",St,[(g(!0),h(A,null,M(a.value.puzzles,(b,te)=>(g(),I(_t,{text:b.name,key:b.slug,"is-active":ee.value==te,onClick:Et=>ve(te)},null,8,["text","is-active","onClick"]))),128))]),t("div",$t,[bt,J.value.length>0?(g(),I(F,{key:0,title:"Przygotowanie",instructions:J.value},null,8,["instructions"])):E("",!0),X.value.length>0?(g(),I(F,{key:1,title:"Smażenie",instructions:X.value},null,8,["instructions"])):E("",!0),K.value.length>0?(g(),I(F,{key:2,title:"Pieczenie",instructions:K.value},null,8,["instructions"])):E("",!0),Q.value.length>0?(g(),I(F,{key:3,title:"Sos",instructions:Q.value},null,8,["instructions"])):E("",!0),Z.value.length>0?(g(),I(F,{key:4,title:"Mieszanie",instructions:Z.value},null,8,["instructions"])):E("",!0),It]),D(Ge,{servings:p.value,ingredients:m.value},null,8,["servings","ingredients"])])):(g(),h("div",Pt," Ładowanie... "))])}}});const Ot=V(Vt,[["__scopeId","data-v-b09e5549"]]);export{Ot as default};
